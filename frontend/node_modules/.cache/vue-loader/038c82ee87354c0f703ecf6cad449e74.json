{"remainingRequest":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/src/views/Home.vue","mtime":1576593393489},{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwovLyBpbXBvcnQgSGVsbG9Xb3JsZCBmcm9tICdAL2NvbXBvbmVudHMvSGVsbG9Xb3JsZC52dWUnOwoKaW1wb3J0IHsgc2h1ZmZsZSB9IGZyb20gJ2xvZGFzaCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2hvbWUnLAogIC8vIGNvbXBvbmVudHM6IHsKICAvLyAgIEhlbGxvV29ybGQsCiAgLy8gfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhcnM6IFtdLAogICAgICBjdXJyZW50Q2FyOiB7fSwKICAgICAgbmV4dFBhZ2U6IG51bGwsCiAgICAgIHByZXZQYWdlOiBudWxsLAogICAgICBmaWx0ZXJzOiBbXSwKICAgIH07CiAgfSwKCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIHRoaXMuZmV0Y2hDYXJzKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgYXN5bmMgZmV0Y2hDYXJzKHVybCA9ICdodHRwOi8vMTI3LjAuMC4xOjgwMDAvYXBpL2NhcnMvJykgewogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7CiAgICAgIGNvbnN0IHsgcmVzdWx0cywgbmV4dCwgcHJldmlvdXMgfSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgdGhpcy5jYXJzID0gcmVzdWx0czsKICAgICAgdGhpcy5uZXh0UGFnZSA9IG5leHQ7CiAgICAgIHRoaXMucHJldlBhZ2UgPSBwcmV2aW91czsKICAgIH0sCgogICAgYXN5bmMgY3JlYXRlQ2FyKCkgewogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vMTI3LjAuMC4xOjgwMDAvYXBpL2NhcnMvJywgewogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIC8vICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgIH0sCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5jdXJyZW50Q2FyKSwKICAgICAgfSk7CgogICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDEpIHsKICAgICAgICBhbGVydChKU09OLnN0cmluZ2lmeShhd2FpdCByZXNwb25zZS5qc29uKCksIG51bGwsIDIpKTsKICAgICAgfQogICAgICBhd2FpdCB0aGlzLmZldGNoQ2FycygpOwogICAgfSwKCiAgICBhc3luYyByZW1vdmVDYXIoY2FyKSB7CiAgICAgIGNvbnN0IHsgaWQgfSA9IGNhcjsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cDovLzEyNy4wLjAuMTo4MDAwL2FwaS9jYXJzLyR7aWR9L2AsIHsKICAgICAgICBtZXRob2Q6ICdERUxFVEUnLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIC8vICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgIH0sCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5jdXJyZW50Q2FyKSwKICAgICAgfSk7CiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwNCkgewogICAgICAgIGFsZXJ0KEpTT04uc3RyaW5naWZ5KGF3YWl0IHJlc3BvbnNlLmpzb24oKSwgbnVsbCwgMikpOwogICAgICB9CiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hDYXJzKCk7CiAgICB9LAoKICAgIHNodWZmbGVDYXJzKCkgewogICAgICB0aGlzLmNhcnMgPSBzaHVmZmxlKHRoaXMuY2Fycyk7CiAgICB9LAoKICAgIGFkZEZpbHRlcigpIHsKICAgICAgdGhpcy5maWx0ZXJzLnB1c2goeyBpZDogTWF0aC5yYW5kb20oKSB9KTsKICAgIH0sCgogICAgZHJvcEZpbHRlcihmaWx0ZXIpIHsKICAgICAgdGhpcy5maWx0ZXJzID0gdGhpcy5maWx0ZXJzLmZpbHRlcihmID0+IGYuaWQgIT09IGZpbHRlci5pZCk7CiAgICB9LAogICAgYXN5bmMgZmlsdGVyQ2FycygpIHsKICAgICAgY29uc3QgZmlsbGVkRmlsdGVycyA9IHRoaXMuZmlsdGVycy5maWx0ZXIoKHsga2V5LCB2YWx1ZSB9KSA9PiBrZXkgJiYgdmFsdWUpOwogICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCdodHRwOi8vMTI3LjAuMC4xOjgwMDAvYXBpL2NhcnMvJyk7CiAgICAgIGZpbGxlZEZpbHRlcnMuZm9yRWFjaCgoeyBrZXksIHZhbHVlIH0pID0+IHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgdmFsdWUpKTsKICAgICAgYXdhaXQgdGhpcy5mZXRjaENhcnModXJsKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <button :disabled=\"!prevPage\" @click=\"fetchCars(prevPage)\">&lt;</button>\n    <button :disabled=\"!nextPage\" @click=\"fetchCars(nextPage)\">&gt;</button>\n    <table>\n      <thead>\n        <tr>\n          <th>Vendor</th>\n          <th>Model</th>\n          <th>Year</th>\n          <th>Volume</th>\n          <th>Remove</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"car in cars\" v-bind:key=\"car.id\">\n          <td>{{ car.vendor }}</td>\n          <td>{{ car.model }}</td>\n          <td>{{ car.year }}</td>\n          <td>{{ car.volume }}</td>\n          <td><button @click=\"removeCar(car)\">-</button></td>\n        </tr>\n      </tbody>\n    </table>\n\n    <button @click=\"filterCars()\">Filter!</button>\n    <button @click=\"addFilter()\">+</button>\n    <ul>\n      <li v-for=\"filter in filters\" v-bind:key=\"filter.id\">\n        <input v-model=\"filter.key\">\n        <input v-model=\"filter.value\">\n        <button @click=\"dropFilter(filter)\">-</button>\n      </li>\n    </ul>\n\n    <button @click=\"shuffleCars()\">Shuffle</button>\n\n    <input placeholder=\"vendor\" v-model=\"currentCar.vendor\">\n    <input placeholder=\"model\" v-model=\"currentCar.model\">\n    <input placeholder=\"year\" v-model.number=\"currentCar.year\">\n    <input placeholder=\"volume\" v-model.number=\"currentCar.volume\">\n    <button @click=\"createCar()\">Create</button>\n\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n// import HelloWorld from '@/components/HelloWorld.vue';\n\nimport { shuffle } from 'lodash';\n\nexport default {\n  name: 'home',\n  // components: {\n  //   HelloWorld,\n  // },\n\n  data() {\n    return {\n      cars: [],\n      currentCar: {},\n      nextPage: null,\n      prevPage: null,\n      filters: [],\n    };\n  },\n\n  async created() {\n    this.fetchCars();\n  },\n\n  methods: {\n    async fetchCars(url = 'http://127.0.0.1:8000/api/cars/') {\n      const response = await fetch(url);\n      const { results, next, previous } = await response.json();\n      this.cars = results;\n      this.nextPage = next;\n      this.prevPage = previous;\n    },\n\n    async createCar() {\n      const response = await fetch('http://127.0.0.1:8000/api/cars/', {\n        method: 'POST',\n        headers: {\n          // 'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(this.currentCar),\n      });\n\n      if (response.status !== 201) {\n        alert(JSON.stringify(await response.json(), null, 2));\n      }\n      await this.fetchCars();\n    },\n\n    async removeCar(car) {\n      const { id } = car;\n      const response = await fetch(`http://127.0.0.1:8000/api/cars/${id}/`, {\n        method: 'DELETE',\n        headers: {\n          // 'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(this.currentCar),\n      });\n      if (response.status !== 204) {\n        alert(JSON.stringify(await response.json(), null, 2));\n      }\n      await this.fetchCars();\n    },\n\n    shuffleCars() {\n      this.cars = shuffle(this.cars);\n    },\n\n    addFilter() {\n      this.filters.push({ id: Math.random() });\n    },\n\n    dropFilter(filter) {\n      this.filters = this.filters.filter(f => f.id !== filter.id);\n    },\n    async filterCars() {\n      const filledFilters = this.filters.filter(({ key, value }) => key && value);\n      const url = new URL('http://127.0.0.1:8000/api/cars/');\n      filledFilters.forEach(({ key, value }) => url.searchParams.append(key, value));\n      await this.fetchCars(url);\n    },\n  },\n};\n</script>\n\n<style scope>\n\n</style>\n"]}]}