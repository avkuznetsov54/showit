{"remainingRequest":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/src/views/Home.vue?vue&type=style&index=0&scope=true&lang=css&","dependencies":[{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/src/views/Home.vue","mtime":1576430277910},{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aleksandr/Desktop/my_python/mac15/DRF_VUE_DOCKER/001/showit/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZmxpcC1saXN0LW1vdmUgewogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxczsKfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <button :disabled=\"!prevPage\" @click=\"fetchCars(prevPage)\">&lt;</button>\n    <button :disabled=\"!nextPage\" @click=\"fetchCars(nextPage)\">&gt;</button>\n    <table>\n      <thead>\n        <tr>\n          <th>Vendor</th>\n          <th>Model</th>\n          <th>Year</th>\n          <th>Volume</th>\n          <th>Remove</th>\n        </tr>\n      </thead>\n      <transition-group name=\"flip-list\" tag=\"tbody\">\n        <tr v-for=\"car in cars\" v-bind:key=\"car.id\">\n          <td>{{ car.vendor }}</td>\n          <td>{{ car.model }}</td>\n          <td>{{ car.year }}</td>\n          <td>{{ car.volume }}</td>\n          <td><button @click=\"removeCar(car)\">-</button></td>\n        </tr>\n      </transition-group>\n    </table>\n\n    <button @click=\"shuffleCars()\">Shuffle</button>\n\n    <input placeholder=\"vendor\" v-model=\"currentCar.vendor\">\n    <input placeholder=\"model\" v-model=\"currentCar.model\">\n    <input placeholder=\"year\" v-model.number=\"currentCar.year\">\n    <input placeholder=\"volume\" v-model.number=\"currentCar.volume\">\n    <button @click=\"createCar()\">Create</button>\n\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n// import HelloWorld from '@/components/HelloWorld.vue';\n\nimport { shuffle } from 'lodash'\n\nexport default {\n  name: 'home',\n  // components: {\n  //   HelloWorld,\n  // },\n\n  data() {\n    return {\n      cars: [],\n      currentCar: {},\n      nextPage: null,\n      prevPage: null,\n    };\n  },\n\n  async created() {\n    this.fetchCars();\n  },\n\n  methods: {\n    async fetchCars(url = 'http://127.0.0.1:8000/api/cars/') {\n      const response = await fetch(url);\n      const { results, next, previous } = await response.json();\n      this.cars = results;\n      this.nextPage = next;\n      this.prevPage = previous;\n    },\n\n    async createCar() {\n      const response = await fetch('http://127.0.0.1:8000/api/cars/', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.currentCar),\n      });\n\n      if (response.status !== 201) {\n        alert(JSON.stringify(await response.json(), null, 2));\n      }\n      await this.fetchCars();\n    },\n\n    async removeCar(car) {\n      const { id } = car;\n      const response = await fetch(`http://127.0.0.1:8000/api/cars/${id}/`, {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.currentCar),\n      });\n      if (response.status !== 204) {\n        alert(JSON.stringify(await response.json(), null, 2));\n      }\n      await this.fetchCars();\n    },\n\n    shuffleCars() {\n      this.cars = shuffle(this.cars);\n    }\n  }\n};\n</script>\n\n<style scope>\n.flip-list-move {\n  transition: transform 1s;\n}\n</style>"]}]}